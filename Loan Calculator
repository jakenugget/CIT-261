
<!DOCTYPE HTML>

<html lang="en-us">

<head>
<meta charset="utf-8">
<title>Loan Calculator</title>
<meta name="author" content="Thor Larsen">
<script>
/* Defining Table
* input: Principal, annual interest, years, no. of payments per year
* processing: Compute periodic payments on a loan using input from
* user.
* output: Payment per period and the loan payoff amount.
*/
function doPayment() {
var principal = parseFloat(document.getElementById("principal").value);
var annualRate = parseFloat(document.getElementById("annualRate").value);
var numOfYears = parseFloat(document.getElementById("years").value);
var periods = parseFloat(document.getElementById("periods").value);

var payment = computePayment(principal, annualRate, numOfYears, periods);


document.getElementById('outputPmtDiv').innerHTML = "$" + payment.toFixed(2);
}
/* Defining table
* input: Principal, annual interest, years, no. of payments per year,
* and no. of payments made from user.
* Processing: Compute the payoff amount for a loan in a
* separate function using standard fincial formulas.
* output: Prinicpal remaining on a loan for payoff.
*/
function doBalance() {
var principal = parseFloat(document.getElementById("principal").value);
var annualRate = parseFloat(document.getElementById("annualRate").value);
var numOfYears = parseFloat(document.getElementById("years").value);
var periods = parseFloat(document.getElementById("periods").value);
var numOfPayments = parseFloat(document.getElementById("numOfPayments").value);

var payoff = computeBalance(principal, annualRate, numOfYears, periods, numOfPayments);


document.getElementById('outputPayoffDiv').innerHTML ="$" + payoff.toFixed(2);
}

function computePayment(principal, annualRate, years, periodsPerYear) {
var periodicRate = annualRate / periodsPerYear;

var totalPeriods = years * periodsPerYear;


var paymentDenominator = 1 - Math.pow(1 + periodicRate, -1 * totalPeriods);
return principal * periodicRate / paymentDenominator;

}

function computeBalance(principal, annualRate, years, periodsPerYear,
numberOfPaymentsPaidToDate) {

var periodicRate = annualRate / periodsPerYear;
var totalPeriods = years * periodsPerYear;

var princPlusIntPaid = principal * Math.pow(1 + periodicRate, numberOfPaymentsPaidToDate);
var paymentPerPeriod = computePayment(principal, annualRate, years, periodsPerYear);
var payoffNumerator = Math.round(paymentPerPeriod * 100) / 100 * (Math.pow(1 + periodicRate, numberOfPaymentsPaidToDate) - 1);

return princPlusIntPaid - payoffNumerator / periodicRate;
}
</script>
</head>

<body>
<h1>Loan Calculator</h1>
Amount borrowed (principal): <input type="text" id="principal" size=5><br>
Annual interest rate (example: .04): <input type="text" id="annualRate" size=5><br>
No. of years: <input type="text" id="years" size=5><br>
Payments per year: <input type="text" id="periods" size=5><br>
<button type="button" onclick="doPayment()">Compute payment</button><br>
<div id="outputPmtDiv"></div>
<br>
Number of payments paid to date: <input type="text" id="numOfPayments" size=5><br>
<button type="button" onclick="doBalance()">Compute payoff amount</button><br>
<div id="outputPayoffDiv"></div>
</body>

</html>
